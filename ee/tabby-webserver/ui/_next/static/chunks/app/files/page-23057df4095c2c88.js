(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[357],{4755:function(e,t,n){Promise.resolve().then(n.bind(n,19622))},19622:function(e,t,n){"use strict";n.r(t),n.d(t,{SourceCodeBrowser:function(){return eM},SourceCodeBrowserContext:function(){return eY}});var r=n(36164),l=n(3546),s=n(11978),a=n(57778),i=n(1853),o=n(94909),c=n(74630),d=n(91971),u=n(21454),f=n(43240),h=n(44645),m=n(80605),x=n(63484),p=n(3765),v=n(11634),g=n(74248),j=n(6618);let b=e=>{let{className:t,...n}=e;return(0,r.jsx)(j.eh,{className:(0,g.cn)("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...n})},y=j.s_,N=e=>{let{withHandle:t,className:n,...l}=e;return(0,r.jsx)(j.OT,{className:(0,g.cn)("border-bg relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",n),...l,children:t&&(0,r.jsx)("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border"})})};var w=n(30601),k=n(90379),S=n(38736),C=n(27064),I=n(826),R=n(18452),_=n(16784),O=n(98454),E=n(25647),P=n(17451),F=n(31458),L=n(81565),U=n(48048);let D=e=>{let{className:t,...n}=e,[{data:s}]=(0,O.P)(),{pendingEvent:a,setPendingEvent:i,repoMap:o,activeRepoRef:c,updateActivePath:d}=l.useContext(eY),u=(0,E.o)(P.a,e=>e.activeChatId),f=l.useRef(null),h=(0,_.d)(o),m=(0,_.d)(c),x=async e=>{if((null==e?void 0:e.filepath)&&(null==e?void 0:e.git_url)){let r=(0,g.nO)(null==e?void 0:e.range),l=h.current,s=(0,I.Z)(Object.keys(l),t=>{var n;return(null==l?void 0:null===(n=l[t])||void 0===n?void 0:n.gitUrl)===e.git_url});if(s){let a=l[s];if(a){var t,n;let l=(0,U.s8)(a.refs),s=(null==m?void 0:null===(t=m.current)||void 0===t?void 0:t.name)||(null===(n=(0,U.r2)(null!=l?l:""))||void 0===n?void 0:n.name);d((0,U.I)(a,s,e.filepath,e.kind),{hash:r,replace:!1});return}}}},p=(0,R.m)(f,{navigate:x}),v=e=>{let{action:t}=e,n="";switch(t){case"explain":n="Explain the selected code:";break;case"generate_unittest":n="Generate a unit test for the selected code:";break;case"generate_doc":n="Generate documentation for the selected code:"}return n};return(l.useEffect(()=>{(null==f?void 0:f.current)&&s&&(null==p||p.init({fetcherOptions:{authorization:s.me.authToken}}))},[null==f?void 0:f.current,p,s]),l.useEffect(()=>{if(a&&p){let{lineFrom:e,lineTo:t,code:n,path:r,gitUrl:l}=a;p.sendMessage({message:v(a),selectContext:{kind:"file",content:n,range:{start:e,end:null!=t?t:e},filepath:r,git_url:l}})}i(void 0)},[a,p]),null==s?void 0:s.me)?(0,r.jsxs)("div",{className:(0,g.cn)("flex h-full flex-col",t),...n,children:[(0,r.jsx)(T,{}),(0,r.jsx)("iframe",{src:"/chat",className:"w-full flex-1 border-0",ref:f},u)]}):(0,r.jsx)(r.Fragment,{})};function T(){let{setChatSideBarVisible:e}=l.useContext(eY);return(0,r.jsx)("div",{className:"sticky top-0 flex items-center justify-end px-2 py-1",children:(0,r.jsx)(F.z,{size:"icon",variant:"ghost",onClick:t=>e(!1),children:(0,r.jsx)(L.IconClose,{})})})}var Z=n(70652),z=n.n(Z);let V=e=>{let{className:t,error:n}=e,l=(0,r.jsx)(A,{});switch(null==n?void 0:n.message){case U.l8.REPOSITORY_NOT_FOUND:l=(0,r.jsx)(Y,{});break;case U.l8.REPOSITORY_SYNC_FAILED:l=(0,r.jsx)(H,{});break;case U.l8.INVALID_URL:l=(0,r.jsx)(G,{})}return(0,r.jsx)("div",{className:(0,g.cn)("flex min-h-[30vh] items-center justify-center",t),children:(0,r.jsx)("div",{className:"flex flex-col items-center gap-4",children:l})})};function Y(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(L.IconFileSearch,{className:"h-6 w-6"}),(0,r.jsx)("div",{className:"text-xl font-semibold",children:"Repository not found"})]}),(0,r.jsxs)(z(),{href:"/files",className:(0,g.cn)((0,F.d)(),"gap-2"),children:[(0,r.jsx)("span",{children:"Back to repositories"}),(0,r.jsx)(L.IconArrowRight,{})]})]})}function A(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(L.IconFileSearch,{className:"h-6 w-6"}),(0,r.jsx)("div",{className:"text-xl font-semibold",children:"Not found"})]}),(0,r.jsxs)(z(),{href:"/files",className:(0,g.cn)((0,F.d)(),"gap-2"),children:[(0,r.jsx)("span",{children:"Back to repositories"}),(0,r.jsx)(L.IconArrowRight,{})]})]})}function H(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(L.IconFileSearch,{className:"h-6 w-6"}),(0,r.jsx)("div",{className:"text-xl font-semibold",children:"Repository is not cloned properly"})]}),(0,r.jsx)("div",{children:"The cloning of the repository has failed. Please verify your settings or attempt to retry the job."}),(0,r.jsxs)(z(),{href:"/settings/providers/git",className:(0,g.cn)((0,F.d)(),"gap-2"),children:[(0,r.jsx)("span",{children:"Providers Configuration"}),(0,r.jsx)(L.IconArrowRight,{})]})]})}function G(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(L.IconFileSearch,{className:"h-6 w-6"}),(0,r.jsx)("div",{className:"text-xl font-semibold",children:"Invalid URL"})]}),(0,r.jsxs)(z(),{href:"/files",className:(0,g.cn)((0,F.d)(),"gap-2"),children:[(0,r.jsx)("span",{children:"Back to repositories"}),(0,r.jsx)(L.IconArrowRight,{})]})]})}var M=n(48537);let B=e=>{let{className:t}=e,{currentFileRoutes:n,activeRepo:s,activeRepoRef:a,activeEntryInfo:i}=l.useContext(eY),o=null==i?void 0:i.basename,c=l.useMemo(()=>{var e;let t=null==i?void 0:i.basename,n=[{name:null!==(e=null==i?void 0:i.repositoryName)&&void 0!==e?e:"",href:(0,U.I)(s,null==a?void 0:a.name,"","dir")}];if(t){let e=decodeURIComponent(t).split("/")||[];for(let t=0;t<e.length;t++){let r=e.slice(0,t+1).join("/"),l=(0,U.i3)(r);n.push({name:decodeURIComponent(l),href:(0,U.I)(s,null==a?void 0:a.name,r,"dir")})}}return n},[i,s,a]);return(0,r.jsxs)("div",{className:(0,g.cn)("flex flex-nowrap items-center gap-1",t),children:[(0,r.jsxs)("div",{className:"flex items-center gap-1 overflow-x-auto leading-8",children:[(0,r.jsx)(z(),{className:"cursor-pointer font-medium text-primary hover:underline",href:"/files",children:"Repositories"}),(0,r.jsx)("div",{children:"/"}),null==c?void 0:c.map((e,t)=>{let n=0===t&&(null==c?void 0:c.length)>1,s=t===c.length-1,a=(0,g.cn)("whitespace-nowrap",n||s?"font-bold":"font-medium",s?"":"cursor-pointer text-primary hover:underline",n?"hover:underline":void 0);return(0,r.jsxs)(l.Fragment,{children:[s?(0,r.jsx)("div",{className:a,children:e.name}):(0,r.jsx)(z(),{className:a,href:"/files/".concat(e.href),children:e.name}),!s&&(0,r.jsx)("div",{children:"/"})]},e.href)})]}),!!(null==n?void 0:n.length)&&!!o&&(0,r.jsx)(M.q,{className:"shrink-0",value:o})]})};var J=n(6495),W=n(24449),q=n(3448),K=n(99047),$=n(42891),Q=n.n($),X=n(23342),ee=n(91655),et=n(2578),en=n(93877),er=n(28312);let el=e=>{let[t,n]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{let t=e.current,r=new IntersectionObserver(e=>{let[t]=e;n(t.intersectionRatio<1)},{threshold:[1]});return t&&r.observe(t),()=>{t&&r.unobserve(t)}},[e.current]),t};var es=n(11208),ea=n(29);let ei=e=>{let{blob:t,className:n,canCopy:s,hideBlobActions:a,contentLength:i,children:o,...c}=e,{chatSideBarVisible:d,setChatSideBarVisible:u,isChatEnabled:f}=l.useContext(eY),[h]=(0,en.Ds)(),m=l.useRef(null),{activePath:x}=l.useContext(eY),{isCopied:p,copyToClipboard:v}=(0,er.m)({timeout:2e3}),j=el(m),b=f&&h.value&&!d,y=i?(0,ee.Z)(i):"",N=async()=>{if(!p&&t)try{let e=await t.text();v(e)}catch(e){et.A.error("Something went wrong. Please try again.")}};return(0,r.jsxs)("div",{className:(0,g.cn)("sticky -top-1 z-10 border",!j&&"rounded-t-lg",n),ref:m,...c,children:[j&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"bg-secondary pl-4",children:(0,r.jsx)(B,{className:"py-2"})}),j&&(0,r.jsx)(es.Z,{})]}),!a&&(0,r.jsxs)("div",{className:(0,g.cn)("flex items-center justify-between bg-secondary p-2 text-secondary-foreground",!j&&"rounded-t-lg"),children:[(0,r.jsxs)("div",{className:"flex h-8 items-center gap-4 leading-8",children:[o,(0,r.jsx)("span",{className:"ml-2 text-sm text-muted-foreground",children:y})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[s&&(0,r.jsxs)(ea.u,{children:[(0,r.jsx)(ea.aJ,{asChild:!0,children:(0,r.jsxs)(F.z,{variant:"ghost",size:"icon",onClick:N,children:[p?(0,r.jsx)(L.IconCheck,{className:"text-green-600"}):(0,r.jsx)(L.IconCopy,{}),(0,r.jsx)("span",{className:"sr-only",children:"Copy"})]})}),(0,r.jsx)(ea._v,{children:"Copy raw file"})]}),!!t&&(0,r.jsxs)(ea.u,{children:[(0,r.jsx)(ea.aJ,{asChild:!0,children:(0,r.jsx)("a",{className:(0,F.d)({variant:"ghost",size:"icon"}),download:(0,U.i3)(null!=x?x:""),href:URL.createObjectURL(t),children:(0,r.jsx)(L.IconDownload,{})})}),(0,r.jsx)(ea._v,{children:"Download raw file"})]}),b&&(0,r.jsxs)(ea.u,{children:[(0,r.jsx)(ea.aJ,{asChild:!0,children:(0,r.jsxs)(F.z,{variant:"ghost",className:"flex shrink-0 items-center gap-1 px-2",onClick:e=>u(!d),children:[(0,r.jsx)(Q(),{alt:"Tabby logo",src:X.Z,width:24}),"Ask Tabby"]})}),(0,r.jsx)(ea._v,{children:"Open chat panel"})]})]})]})]})};var eo=n(18500);function ec(e){let{kind:t,fallback:n}=e;switch(t){case eo.vW.Git:return(0,r.jsx)(L.IconDirectorySolid,{style:{color:"rgb(84, 174, 255)"}});case eo.vW.Github:case eo.vW.GithubSelfHosted:return(0,r.jsx)(L.IconGitHub,{});case eo.vW.Gitlab:case eo.vW.GitlabSelfHosted:return(0,r.jsx)(L.IconGitLab,{});default:return null!=n?n:null}}let ed=e=>{var t,n;let{className:s,loading:a,initialized:i}=e,{activePath:c,currentFileRoutes:d,fileTreeData:u,activeRepo:f,activeRepoRef:h,repoMap:m,activeEntryInfo:x,fileMap:p}=l.useContext(eY),v=l.useMemo(()=>(0,o.Z)(m)||f?function(e,t){if(!(null==e?void 0:e.length))return[];if(t){let{basename:n=""}=(0,U.Jt)(t);if(!n)return e;let r=decodeURIComponent(n).split("/"),l=e;for(let e=0;e<r.length;e++){let t=r.slice(0,e+1).join("/"),n=(0,I.Z)(l,e=>e.fullPath===t);if(null==n||!n.children)return[];l=null==n?void 0:n.children}return(null==l?void 0:l.map(e=>(0,J.Z)(e,"children")))||[]}{let t=e.map(e=>(0,J.Z)(e,"children"))||[];return t}}(u,c):(0,U.UR)(m).map(e=>{var t;return{file:{basename:e.name,kind:"dir"},isRepository:!0,repository:e,fullPath:(0,U.I)(e,null===(t=(0,U.r2)((0,U.s8)(e.refs)))||void 0===t?void 0:t.name,"","dir"),name:e.name}}),[u,c,f,m]),[j]=(0,W.n)(a,300),b=!!(null==x?void 0:x.basename),y=d[(null==d?void 0:d.length)-2];return(0,r.jsxs)("div",{className:(0,g.cn)("text-base",s),children:[(0,r.jsx)(ei,{blob:void 0,hideBlobActions:!0,className:"border-0"}),(!j||(null==v?void 0:v.length))&&i?(null==v?void 0:v.length)?(0,r.jsx)(K.iA,{children:(0,r.jsxs)(K.RM,{children:[b&&(0,r.jsx)(K.SC,{className:"cursor-pointer",children:(0,r.jsx)(K.pj,{className:"p-1 px-4",children:(0,r.jsx)(z(),{href:"/files/".concat((0,U.I)(f,null==h?void 0:h.name,null==y?void 0:null===(t=y.file)||void 0===t?void 0:t.basename,null==y?void 0:null===(n=y.file)||void 0===n?void 0:n.kind)),children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"shrink-0",children:(0,r.jsx)(L.IconDirectorySolid,{style:{color:"rgb(84, 174, 255)"}})}),(0,r.jsx)("span",{className:"px-1 py-2",children:".."})]})})})}),(0,r.jsx)(r.Fragment,{children:v.map(e=>{var t;let n=e.isRepository,l=null===(t=e.repository)||void 0===t?void 0:t.kind;return(0,r.jsx)(K.SC,{children:(0,r.jsx)(K.pj,{className:"p-1 px-4 text-base",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"shrink-0",children:n?(0,r.jsx)(ec,{kind:l,fallback:(0,r.jsx)(L.IconDirectorySolid,{style:{color:"rgb(84, 174, 255)"}})}):"dir"===e.file.kind?(0,r.jsx)(L.IconDirectorySolid,{style:{color:"rgb(84, 174, 255)"}}):(0,r.jsx)(L.IconFile,{})}),(0,r.jsx)(z(),{href:n?"/files/".concat(e.fullPath):"/files/".concat((0,U.I)(null!=f?f:e.repository,null==h?void 0:h.name,e.file.basename,e.file.kind)),className:"cursor-pointer px-1 py-2 hover:text-primary hover:underline",children:e.name})]})})},e.fullPath)})})]})}):(0,o.Z)(m)?(0,r.jsx)("div",{className:"flex justify-center py-8",children:"No indexed repository yet"}):null:(0,r.jsx)(eu,{})]})};function eu(){return(0,r.jsxs)("ul",{className:"space-y-3 p-2",children:[(0,r.jsx)(q.O,{}),(0,r.jsx)(q.O,{}),(0,r.jsx)(q.O,{}),(0,r.jsx)(q.O,{})]})}var ef=n(76297),eh=n(36327);let em=l.createContext({}),ex=e=>{let{onSelectTreeNode:t,children:n,activePath:l,fileMap:s,updateFileMap:a,expandedKeys:i,toggleExpandedKey:o,initialized:c,fileTreeData:d,fetchingTreeEntries:u}=e;return(0,r.jsx)(em.Provider,{value:{onSelectTreeNode:t,fileTreeData:d,expandedKeys:i,toggleExpandedKey:o,activePath:l,fileMap:s,updateFileMap:a,initialized:c,fetchingTreeEntries:u},children:n})},ep=e=>{let{level:t}=e,n=l.useMemo(()=>Array(t).fill(1),[t]);return(0,r.jsx)("div",{className:"flex h-full shrink-0 items-stretch",children:n.map((e,t)=>(0,r.jsx)("div",{className:"flex h-8 w-2 border-r border-transparent transition-colors duration-300 group-hover/filetree:border-border"},t))})},ev=()=>{let{ref:e,entry:t,inView:n}=(0,ef.YD)({trackVisibility:!0,delay:500});return l.useEffect(()=>{if((null==t?void 0:t.target)&&!n){var e;null==t||null===(e=t.target)||void 0===e||e.scrollIntoView({block:"center"})}},[null==t?void 0:t.target]),(0,r.jsx)("div",{ref:e,className:"absolute -left-2 h-8 w-1 rounded-md bg-primary"})},eg=e=>{let{isActive:t,level:n,children:l,className:s,...a}=e;return(0,r.jsxs)("div",{className:(0,g.cn)("relative flex h-8 cursor-pointer items-stretch rounded-sm hover:bg-accent focus:bg-accent focus:text-accent-foreground",t&&"bg-accent",s),...a,children:[t&&(0,r.jsx)(ev,{}),(0,r.jsx)(ep,{level:n}),(0,r.jsxs)("div",{className:"flex flex-nowrap items-center gap-2 truncate whitespace-nowrap",children:[(0,r.jsx)("div",{className:"h-4 w-4 shrink-0"}),l]})]})},ej=e=>{let{children:t,level:n,isActive:l,className:s,...a}=e;return(0,r.jsxs)("div",{className:(0,g.cn)("relative flex cursor-pointer items-stretch rounded-sm hover:bg-accent focus:bg-accent focus:text-accent-foreground",l?"bg-accent text-accent-foreground":void 0,s),...a,children:[l&&(0,r.jsx)(ev,{}),(0,r.jsx)(ep,{level:n}),(0,r.jsx)("div",{className:"flex flex-nowrap items-center gap-2 truncate whitespace-nowrap",children:t})]})},eb=e=>{let{node:t,level:n}=e,{activeEntryInfo:s}=l.useContext(eY),{onSelectTreeNode:a}=l.useContext(em),i="file"===t.file.kind,o=t.fullPath===(null==s?void 0:s.basename);return(0,r.jsxs)(eg,{level:n,onClick:e=>{i&&(null==a||a(t))},isActive:o,children:[(0,r.jsx)(L.IconFile,{className:"shrink-0"}),(0,r.jsx)("div",{className:"truncate",children:null==t?void 0:t.name})]})},ey=e=>{var t,n,s;let{node:a,level:i,root:o}=e,{activeRepo:c,activeRepoRef:d,activeEntryInfo:u}=l.useContext(eY),{fileMap:f,updateFileMap:h,expandedKeys:m,toggleExpandedKey:x,onSelectTreeNode:v}=l.useContext(em),g=l.useRef(!1),j=o?"":a.file.basename,b=m.has(j),y="dir"===a.file.kind&&!(null==f?void 0:null===(t=f[a.fullPath])||void 0===t?void 0:t.treeExpanded)&&b,{data:N,isLoading:w}=(0,eh.Z)(y?(0,U.Vq)(c,null==d?void 0:d.name,j):null,p.Z,{revalidateIfStale:!1});l.useEffect(()=>{var e;if(!g.current&&(null==N?void 0:null===(e=N.entries)||void 0===e?void 0:e.length)){let e=N.entries.reduce((e,t)=>{let n=t.basename;return{...e,[n]:{file:t,name:(0,U.i3)(n),fullPath:n,treeExpanded:!1}}},{});h(e),g.current=!0}},[N]);let[k]=(0,W.n)(w,100),S=!!(null==a?void 0:null===(n=a.children)||void 0===n?void 0:n.length);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(ej,{level:i,onClick:e=>{null==v||v(a)},isActive:(null==u?void 0:u.basename)===a.fullPath,children:[(0,r.jsx)("div",{className:"flex h-8 shrink-0 items-center hover:bg-primary/10 hover:text-popover-foreground",onClick:e=>{k||(x(a.fullPath),e.stopPropagation())},children:k&&!g.current?(0,r.jsx)(L.IconSpinner,{}):b?(0,r.jsx)(L.IconChevronDown,{}):(0,r.jsx)(L.IconChevronRight,{})}),(0,r.jsx)("div",{className:"shrink-0",style:{color:"rgb(84, 174, 255)"},children:b?(0,r.jsx)(L.IconDirectoryExpandSolid,{}):(0,r.jsx)(L.IconDirectorySolid,{})}),(0,r.jsx)("div",{className:"truncate",children:null==a?void 0:a.name})]}),(0,r.jsx)(r.Fragment,{children:b&&S?(0,r.jsx)(r.Fragment,{children:null===(s=a.children)||void 0===s?void 0:s.map(e=>{let t=e.file.basename;return"dir"===e.file.kind?(0,r.jsx)(ey,{node:e,level:i+1},t):(0,r.jsx)(eb,{node:e,level:i+1},t)})}):null})]})},eN=()=>{let{repoMap:e,activeEntryInfo:t}=l.useContext(eY),{initialized:n,fileTreeData:s,fetchingTreeEntries:a}=l.useContext(em),{repositorySpecifier:i}=t,c=!!i,d=c&&!(null==s?void 0:s.length);return n?(0,o.Z)(e)?(0,r.jsx)("div",{className:"flex h-full items-center justify-center",children:"No Indexed repository"}):c?d?a?(0,r.jsx)(ek,{}):(0,r.jsx)("div",{className:"flex h-full items-center justify-center",children:"No Data"}):(0,r.jsx)(r.Fragment,{children:null==s?void 0:s.map(e=>{var t;let n=(null==e?void 0:null===(t=e.file)||void 0===t?void 0:t.kind)==="file";return n?(0,r.jsx)(eb,{level:0,node:e},e.fullPath):(0,r.jsx)(ey,{level:0,node:e},e.fullPath)})}):null:(0,r.jsx)(ek,{})},ew=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,g.cn)("group/filetree",t),children:(0,r.jsx)(ex,{...n,children:(0,r.jsx)(eN,{})})})};function ek(){return(0,r.jsxs)("div",{className:"space-y-3 p-2",children:[(0,r.jsx)(q.O,{}),(0,r.jsx)(q.O,{className:"ml-4"}),(0,r.jsx)(q.O,{className:"ml-4"}),(0,r.jsx)(q.O,{}),(0,r.jsx)(q.O,{className:"ml-4"})]})}var eS=n(62940),eC=n(40055),eI=n(36065),eR=n(84942),e_=n(54594),eO=n(50538),eE=n(95623);let eP=(0,f.BX)("\n  query RepositorySearch(\n    $kind: RepositoryKind!\n    $id: ID!\n    $rev: String\n    $pattern: String!\n  ) {\n    repositorySearch(kind: $kind, id: $id, rev: $rev, pattern: $pattern) {\n      type\n      path\n      indices\n    }\n  }\n"),eF=e=>{var t,n,s,a;let{className:i,...o}=e,{activePath:d,updateActivePath:u,initialized:f,activeRepo:h,activeRepoRef:m,fileMap:x,repoMap:p,activeEntryInfo:v}=(0,l.useContext)(eY),j=l.useMemo(()=>(0,U.UR)(p).map(e=>{let t=(0,U.Pj)(e);return{repo:e,repoSpecifier:t}}),[p]),[b,y]=l.useState(!1),[N,w]=l.useState(null!==(t=null==m?void 0:m.kind)&&void 0!==t?t:"branch"),{repositoryKind:k,repositoryName:S,repositorySpecifier:C}=v,I=null==h?void 0:h.id,R=null==h?void 0:h.refs,_=l.useMemo(()=>(null==R?void 0:R.length)?R.map(e=>(0,U.r2)(e)):[],[R]),O=_.filter(e=>"branch"===e.kind),E=_.filter(e=>"tag"===e.kind),P=l.useRef(null),[D,T]=l.useState(),[Z,z]=l.useState(),[V,Y]=l.useState(),[A,H]=l.useState(!1),G=f&&!(null==j?void 0:j.length),[{data:M}]=(0,eC.aM)({query:eP,variables:{kind:k,id:I,pattern:null!=Z?Z:"",rev:(null==m?void 0:m.name)?decodeURIComponent(m.name):void 0},pause:!I||!k||!Z}),B=e=>{var t,n,r,l,s;if((0,c.Z)(e))return;let a=null!==(l=null===(t=(0,U.r2)(e))||void 0===t?void 0:t.name)&&void 0!==l?l:"",{basename:i=""}=v,o=null!==(s=null==x?void 0:null===(r=x[i])||void 0===r?void 0:null===(n=r.file)||void 0===n?void 0:n.kind)&&void 0!==s?s:"dir";T(void 0),u((0,U.I)(h,a,i,o))};l.useEffect(()=>{var e,t;let n=null!==(t=null==M?void 0:null===(e=M.repositorySearch)||void 0===e?void 0:e.map(e=>({...e,id:e.path})))&&void 0!==t?t:[];Y(n),H(!!Z)},[null==M?void 0:M.repositorySearch]);let J=(0,W.S)(e=>{e?z(e):(z(""),H(!1),Y([]))},500),q=()=>{J.run(""),J.flush()},K=async e=>{if(!e.path)return;let t=(0,U.I)(h,null==m?void 0:m.name,e.path,e.type);u(t)};return l.useEffect(()=>{let e=e=>{var t,n;let r=e.target,l=null==r?void 0:null===(t=r.tagName)||void 0===t?void 0:t.toLowerCase();"input"!==l&&"textarea"!==l&&"select"!==l&&"t"===e.key&&(e.preventDefault(),null===(n=P.current)||void 0===n||n.focus())};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[]),(0,r.jsxs)("div",{className:(0,g.cn)(i),...o,children:[(0,r.jsx)("div",{className:"py-4 font-bold leading-8",children:"Files"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)(e_.Ph,{disabled:!f,onValueChange:e=>{var t;let n=null===(t=j.find(t=>t.repoSpecifier===e))||void 0===t?void 0:t.repo;if(n){let t="".concat(e,"/-/tree/").concat((0,U.r2)((0,U.s8)(n.refs)).name);T(void 0),u(t)}},value:C,children:[(0,r.jsx)(e_.i4,{children:(0,r.jsx)(e_.ki,{asChild:!0,children:(0,r.jsxs)("div",{className:"flex items-center gap-2 overflow-hidden",children:[(0,r.jsx)("div",{className:"shrink-0",children:(0,r.jsx)(ec,{kind:k,fallback:(0,r.jsx)(L.IconFolderGit,{})})}),(0,r.jsx)("span",{className:(0,g.cn)("truncate",!S&&"text-muted-foreground"),children:S||"Pick a repository"})]})})}),(0,r.jsx)(e_.Bw,{className:"max-h-[50vh] overflow-y-auto",children:G?(0,r.jsx)(e_.Ql,{isPlaceHolder:!0,value:"",disabled:!0,children:"No indexed repository"}):(0,r.jsx)(r.Fragment,{children:null==j?void 0:j.map(e=>(0,r.jsx)(e_.Ql,{value:e.repoSpecifier,children:(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(ec,{kind:e.repo.kind,fallback:(0,r.jsx)(L.IconFolderGit,{})}),e.repo.name]})},e.repoSpecifier))})})]}),(0,r.jsxs)(eR.J2,{open:b,onOpenChange:y,children:[(0,r.jsx)(eR.xo,{asChild:!0,children:(0,r.jsx)(F.z,{className:"w-full justify-start gap-2 px-3",variant:"outline",children:!!m&&(0,r.jsxs)(r.Fragment,{children:["branch"===m.kind?(0,r.jsx)(L.IconGitFork,{}):(0,r.jsx)(L.IconTag,{}),decodeURIComponent(null!==(n=m.name)&&void 0!==n?n:"")]})})}),(0,r.jsx)(eR.yk,{className:"w-[var(--radix-popover-trigger-width)] p-0",align:"start",side:"bottom",children:(0,r.jsxs)(eI.mY,{className:"transition-all",children:[(0,r.jsx)(eI.sZ,{placeholder:"tag"===N?"Find a tag":"Find a branch"}),(0,r.jsx)(eO.mQ,{className:"my-1 border-b",value:N,onValueChange:e=>w(e),children:(0,r.jsxs)(eO.dr,{className:"bg-popover py-0",children:[(0,r.jsx)(eO.SP,{value:"branch",children:"Branches"}),(0,r.jsx)(eO.SP,{value:"tag",children:"Tags"})]})}),(0,r.jsxs)(eI.e8,{className:"max-h-[30vh]",children:[(0,r.jsx)(eI.rb,{children:"Nothing to show"}),(0,r.jsx)(eI.fu,{children:("tag"===N?E:O).map((e,t)=>(0,r.jsxs)(eI.di,{onSelect:()=>{y(!1),B(e.ref)},children:[(0,r.jsx)(L.IconCheck,{className:(0,g.cn)("mr-2",(null==e?void 0:e.name)&&e.name===(null==m?void 0:m.name)?"opacity-100":"opacity-0")}),decodeURIComponent(null!==(s=e.name)&&void 0!==s?s:"")]},null!==(a=e.ref)&&void 0!==a?a:t))})]})]})})]}),(0,r.jsx)(eE.Vc,{stayOpenOnInputClick:!0,options:V,onSelect:K,open:A,onOpenChange:e=>{(D||(null==V?void 0:V.length))&&e?H(!0):H(!1)},children:e=>{let{highlightedIndex:t}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eE.JH,{children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(eE.KM,{className:"pr-8",placeholder:"Go to file",spellCheck:!1,value:D,ref:P,disabled:!S,onClick:e=>{Z&&!A&&H(!0)},onChange:e=>{let t=e.target.value;T(t),t?J.run(t):q()}}),(0,r.jsx)("div",{className:"absolute right-2 top-0 flex h-full items-center",children:D?(0,r.jsx)(F.z,{variant:"ghost",size:"icon",className:"h-6 w-6 cursor-pointer",onClick:e=>{var t;T(""),q(),null===(t=P.current)||void 0===t||t.focus()},children:(0,r.jsx)(L.IconClose,{})}):(0,r.jsx)("kbd",{className:"rounded-md border bg-secondary/50 px-1.5 text-xs leading-4 text-muted-foreground shadow-[inset_-0.5px_-1.5px_0_hsl(var(--muted))]",onClick:e=>{var t;null===(t=P.current)||void 0===t||t.focus()},children:"t"})})]})}),(0,r.jsx)(eE.fD,{align:"start",side:"bottom",onOpenAutoFocus:e=>e.preventDefault(),style:{width:"50vw",maxWidth:700},className:"max-h-[50vh] overflow-y-auto",children:(0,r.jsx)(r.Fragment,{children:(null==V?void 0:V.length)?null==V?void 0:V.map((e,n)=>(0,r.jsxs)(eE.x5,{item:e,index:n,className:"flex w-full items-center gap-2 overflow-x-hidden",children:[(0,r.jsx)("div",{className:"shrink-0",children:"dir"===e.type?(0,r.jsx)(L.IconDirectorySolid,{style:{color:"rgb(84, 174, 255)"}}):(0,r.jsx)(L.IconFile,{})}),(0,r.jsx)("div",{className:"flex-1 break-all",children:(0,r.jsx)(eL,{text:e.path,indices:e.indices})}),t===n&&(0,r.jsx)("div",{className:"shrink-0`",children:"dir"===e.type?"Go to folder":"Go to file"})]},null==e?void 0:e.id)):(0,r.jsx)("div",{className:"flex h-24 items-center justify-center",children:"No matches found"})})})]})}})]})]})},eL=e=>{let{text:t,indices:n}=e,s=l.useMemo(()=>new Set(n),[n]);return(0,r.jsx)("p",{className:"text-muted-foreground",children:t.split("").map((e,t)=>s.has(t)?(0,r.jsx)("span",{className:"font-semibold text-foreground",children:e},"".concat(e,"_").concat(t)):e)})},eU=e=>{let{fetchingTreeEntries:t}=e,{activePath:n,updateActivePath:s,expandedKeys:a,updateFileMap:i,toggleExpandedKey:o,initialized:c,fileTreeData:d,fileMap:u,activeRepo:f,activeRepoRef:h}=l.useContext(eY),m=l.useRef(null),x=function(e,t){var n,r;let[s,a]=(0,l.useState)(null!==(r=null===(n=e.current)||void 0===n?void 0:n.scrollTop)&&void 0!==r?r:0);return(0,l.useEffect)(()=>{if(e.current){let n=(0,eS.Z)(()=>{var t,n;a(null!==(n=null===(t=e.current)||void 0===t?void 0:t.scrollTop)&&void 0!==n?n:0)},t,{leading:!0}),r=e.current;return r.addEventListener("scroll",n),()=>{r.removeEventListener("scroll",n)}}},[e,t]),s}(m,200);return(0,r.jsxs)("div",{className:"flex h-full flex-col overflow-hidden",children:[(0,r.jsx)(eF,{className:"shrink-0 px-4 pb-3"}),x>0&&(0,r.jsx)("div",{className:"h-0 border-b shadow-[0px_3px_8px_rgba(0,0,0,0.3)] dark:shadow-[0px_3px_8px_rgba(255,255,255,0.3)]"}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto px-4",ref:m,children:(0,r.jsx)(ew,{onSelectTreeNode:e=>{let t=(0,U.I)(f,null==h?void 0:h.name,e.file.basename,e.file.kind);s(t)},activePath:n,fileMap:u,updateFileMap:i,expandedKeys:a,toggleExpandedKey:o,initialized:c,fileTreeData:d,fetchingTreeEntries:t})})]})},eD=e=>{let{className:t,blob:n,isImage:s,contentLength:a}=e,{activePath:i}=(0,l.useContext)(eY);return(0,r.jsxs)("div",{className:(0,g.cn)(t),children:[(0,r.jsx)(ei,{blob:n,contentLength:a}),(0,r.jsx)("div",{className:"rounded-b-lg border border-t-0 p-2 text-center",children:s?(0,r.jsx)("img",{className:"mx-auto",src:n?URL.createObjectURL(n):void 0}):(0,r.jsx)("a",{className:"text-primary hover:underline",download:(0,U.i3)(null!=i?i:""),href:n?URL.createObjectURL(n):"",target:"_blank",children:"View raw"})})]})},eT=l.lazy(()=>Promise.all([n.e(5870),n.e(6056),n.e(9148),n.e(5392),n.e(1446)]).then(n.bind(n,81446))),eZ=l.lazy(()=>Promise.all([n.e(5606),n.e(177),n.e(557)]).then(n.bind(n,30557))),ez=e=>{var t;let{className:n,blob:s,contentLength:a}=e,{searchParams:i,updateUrlComponents:o}=(0,h.Z)(),[c,d]=l.useState(""),{activePath:u}=(0,l.useContext)(eY),f=u?(0,x.U$)(u)[0]:void 0,m=null!=f?f:"plain",p=!!c&&"markdown"===m,v=(null===(t=i.get("plain"))||void 0===t?void 0:t.toString())==="1";return l.useEffect(()=>{let e=async e=>{try{let t=await e.text();d(t)}catch(e){d("")}};s&&e(s)},[s]),(0,r.jsxs)("div",{className:(0,g.cn)(n),children:[(0,r.jsx)(ei,{blob:s,contentLength:a,canCopy:!0,children:p&&(0,r.jsx)(eO.mQ,{value:v?"1":"0",onValueChange:e=>{"1"===e?o({searchParams:{set:{plain:"1"}}}):o({searchParams:{del:"plain"}})},children:(0,r.jsxs)(eO.dr,{children:[(0,r.jsx)(eO.SP,{value:"0",children:"Preview"}),(0,r.jsx)(eO.SP,{value:"1",children:"Code"})]})})}),(0,r.jsx)("div",{className:"rounded-b-lg border border-t-0 py-2",children:(0,r.jsx)(l.Suspense,{fallback:(0,r.jsx)(k.cg,{className:"p-2"}),children:p&&!v?(0,r.jsx)(eZ,{value:c}):(0,r.jsx)(eT,{value:c,language:m})})})]})},eV=(0,f.BX)("\n  query RepositoryList {\n    repositoryList {\n      id\n      name\n      kind\n      gitUrl\n      refs\n    }\n  }\n"),eY=l.createContext({}),eA=e=>{let{children:t}=e,n=(0,s.usePathname)(),{updateUrlComponents:a}=(0,h.Z)(),[o,c]=l.useState(!1),[d,u]=l.useState(),f=l.useMemo(()=>(0,U.Jt)(d),[d]),x=(0,m.xG)(),[p,v]=l.useState(!1),[g,j]=l.useState({}),[b,y]=l.useState({}),[N,w]=l.useState(new Set),[k,S]=l.useState(!1),[C,I]=l.useState(),R=l.useRef(),_=l.useCallback(async(e,t)=>{let n=null==t?void 0:t.replace;e?a({pathname:"/files/".concat(e),searchParams:{set:{},del:["plain","redirect_filepath","redirect_git_url","line"]},replace:n,hash:null==t?void 0:t.hash}):a({pathname:"/files",searchParams:{del:["path","plain","line"]},hash:null==t?void 0:t.hash,replace:n})},[]),O=l.useMemo(()=>(function e(t){if(!t.length)return[];for(let n of(t.sort((e,t)=>{let n="file"===e.file.kind?1:0,r="file"===t.file.kind?1:0;return n-r||e.name.localeCompare(t.name)}),t))(null==n?void 0:n.children)&&e(n.children);return t})(function(e){let t=[];if(!e)return t;let n=Object.keys(e);for(let r of n){let n=e[r],l=r.split("/"),s=t;for(let e=0;e<l.length;e++){let t=l.slice(0,e+1).join("/"),a=null==s?void 0:s.find(e=>e.fullPath===t);if(a)s=a.children||[];else{let e={file:n.file,name:n.name,fullPath:r,children:[],isRepository:n.isRepository,repository:n.repository};s.push(e),s=e.children}}}return t}(g)),[g]),E=l.useMemo(()=>{let{repositoryKind:e,repositoryName:t,repositorySpecifier:n}=f;if(e&&t)return n?b[n]:void 0},[b,f]),P=l.useMemo(()=>{var e,t;if(!f||!E)return;let n=decodeURIComponent(null!==(t=null==f?void 0:f.rev)&&void 0!==t?t:""),r=null===(e=E.refs)||void 0===e?void 0:e.find(e=>e==="refs/heads/".concat(n)||e==="refs/tags/".concat(n));if(r)return(0,U.r2)(r)},[f,E]),F=l.useMemo(()=>{var e;if(!d)return[];let{basename:t=""}=f,n=[{file:{kind:"dir",basename:""},isRepository:!0,repository:E,name:null!==(e=null==E?void 0:E.name)&&void 0!==e?e:"",fullPath:""}],r=(null==t?void 0:t.split("/"))||[];for(let e=0;e<r.length;e++){let t=r.slice(0,e+1).join("/");n.push(null==g?void 0:g[t])}return(0,i.Z)(n)},[d,g,f]);return l.useEffect(()=>{var e;let t=null===(e=n.match(/^\/files\/(.*)/))||void 0===e?void 0:e[1];R.current=d,u(null!=t?t:""),o||c(!0)},[n]),(0,r.jsx)(eY.Provider,{value:{initialized:p,setInitialized:v,activePath:d,updateActivePath:_,fileMap:g,updateFileMap:(e,t)=>{e&&(t?j(e):j(t=>({...t,...e})))},expandedKeys:N,setExpandedKeys:w,toggleExpandedKey:e=>{let t=N.has(e),n=new Set(N);t?n.delete(e):n.add(e),w(n)},currentFileRoutes:F,fileTreeData:O,chatSideBarVisible:k,setChatSideBarVisible:S,pendingEvent:C,setPendingEvent:I,isChatEnabled:x,repoMap:b,setRepoMap:y,activeRepo:E,activeRepoRef:P,isPathInitialized:o,activeEntryInfo:f,prevActivePath:R},children:t})},eH="application/vnd.directory+json",eG=e=>{let{className:t}=e,{activePath:n,updateActivePath:s,initialized:a,setInitialized:i,chatSideBarVisible:f,setChatSideBarVisible:m,setPendingEvent:x,repoMap:v,setRepoMap:j,activeRepo:w,activeRepoRef:I,isPathInitialized:R,activeEntryInfo:_,prevActivePath:O,updateFileMap:E,setExpandedKeys:P}=l.useContext(eY),{searchParams:F}=(0,h.Z)(),L=l.useRef(!1),{progress:T,setProgress:Z}=(0,S.U)(),z=l.useRef(null),[Y,A]=l.useState(35),H=l.useMemo(()=>(0,U.Jt)(n),[n]),G=null==H?void 0:H.basename,[M,J]=l.useState(),W=(null==_?void 0:_.viewMode)==="blob",q=!!R&&!(0,o.Z)(v)&&!!n,{data:K,isLoading:$,error:Q}=(0,u.ZP)(q?n:null,e=>{let{repositorySpecifier:t}=(0,U.Jt)(e);return eW(e,t?null==v?void 0:v[t]:void 0).then(t=>({entries:t,requestPathname:e}))},{revalidateOnFocus:!1,shouldRetryOnError:!1}),{data:X,isLoading:ee,error:et}=(0,u.ZP)(W&&w?(0,U.Vq)(w,null==I?void 0:I.name,G):null,e=>(0,p.Z)(e,{responseFormatter:async e=>{let t=e.headers.get("Content-Type");if(t===eH)throw Error(U.l8.INVALID_URL);let n=(0,d.Z)(e.headers.get("Content-Length")),r=await e.blob();return{contentLength:n,blob:r}},errorHandler(){throw Error(U.l8.NOT_FOUND)}}),{revalidateOnFocus:!1,shouldRetryOnError:!1}),en=null==X?void 0:X.blob,er=null==X?void 0:X.contentLength,el=(null==_?void 0:_.viewMode)==="tree"||!(null==_?void 0:_.viewMode),es=W&&"text"===M,ea=W&&("image"===M||"raw"===M);return l.useEffect(()=>{let e=async()=>{if(L.current)return;L.current=!0;let e=await eB(),t=F.get("redirect_filepath"),n=F.get("redirect_git_url");if((null==e?void 0:e.length)&&t&&n){let i=e.find(e=>e.gitUrl===n);if(i){var r,l,a;let e=(0,U.s8)(i.refs),n=(null===(r=(0,U.r2)(null!=e?e:""))||void 0===r?void 0:r.name)||"",o=(0,U.kQ)(window.location.hash),d=!(0,c.Z)(null==o?void 0:o.start),u=parseInt(null!==(a=null===(l=F.get("line"))||void 0===l?void 0:l.toString())&&void 0!==a?a:""),f=d?window.location.hash:(0,g.nO)({start:u});s((0,U.I)(i,n,t,"file"),{replace:!0,hash:f}),L.current=!1;return}}e&&j((0,U.fr)(e)),i(!0)};!a&&R&&e()},[n,a,R]),l.useEffect(()=>{if(!K)return;let{entries:e,requestPathname:t}=K,{repositorySpecifier:n,viewMode:r,basename:l,rev:s}=(0,U.Jt)(t),{repositorySpecifier:a,rev:i}=(0,U.Jt)(O.current),o=(0,U.yH)(l,"tree"===r),c={};if(e.length)for(let t of e){let e=t.basename;c[e]={file:t,name:(0,U.i3)(e),fullPath:e,treeExpanded:o.includes(t.basename)}}let d=o.filter(Boolean),u=n!==a||s!==i;c&&E(c,u),(null==d?void 0:d.length)&&(u?P(new Set(d)):P(e=>{let t=new Set(e);for(let e of d)t.add(e);return t}))},[K]),l.useEffect(()=>{!a||(!T&&(ee||$)?Z(!0):ee||$||Z(!1))},[ee,$]),l.useEffect(()=>{let e=async()=>{let e=await eJ(null!=n?n:"",en);J(e)};W?e():J("")},[n,W,en]),l.useEffect(()=>{var e,t,n;f?(null===(e=z.current)||void 0===e||e.expand(),null===(t=z.current)||void 0===t||t.resize(Y)):null===(n=z.current)||void 0===n||n.collapse()},[f]),l.useEffect(()=>{if(!(ee||$))return;let{repositorySpecifier:e,rev:t}=_,{repositorySpecifier:n,rev:r}=(0,U.Jt)(O.current);(e!==n||t!==r)&&(E({},!0),P(new Set))},[_]),l.useEffect(()=>{let e=e=>{m(!0),x(e)};return C.u.on("code_browser_quick_action",e),()=>{C.u.off("code_browser_quick_action",e)}},[]),(0,r.jsxs)(b,{direction:"horizontal",className:(0,g.cn)(t),onLayout:e=>{(null==e?void 0:e[2])&&A(e[2])},children:[(0,r.jsx)(y,{defaultSize:20,minSize:20,maxSize:40,className:"hidden lg:block",children:(0,r.jsx)(eU,{fetchingTreeEntries:$})}),(0,r.jsx)(N,{className:"hidden w-1 bg-border/40 hover:bg-border active:bg-blue-500 lg:block"}),(0,r.jsx)(y,{defaultSize:80,minSize:30,children:(0,r.jsxs)("div",{className:"flex h-full flex-col overflow-y-auto px-4 pb-4",children:[(0,r.jsx)(B,{className:"py-4"}),a?et||Q?(0,r.jsx)(V,{className:"rounded-lg border p-4",error:Q||et}):(0,r.jsxs)("div",{children:[el&&(0,r.jsx)(ed,{loading:$,initialized:a,className:"rounded-lg border"}),es&&(0,r.jsx)(ez,{blob:en,contentLength:er}),ea&&(0,r.jsx)(eD,{blob:en,isImage:"image"===M,contentLength:er})]}):(0,r.jsx)(k.cg,{className:"rounded-lg border p-4"})]})}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(N,{className:(0,g.cn)("hidden w-1 bg-border/40 hover:bg-border active:bg-blue-500",f&&"block")}),(0,r.jsx)(y,{collapsible:!0,collapsedSize:0,defaultSize:0,minSize:25,ref:z,onCollapse:()=>m(!1),children:(0,r.jsx)(D,{})})]})]})},eM=e=>{let[t]=(0,w.Hb)(),n=t?{height:"calc(100vh - ".concat(w.wt,")")}:{height:"100vh"};return(0,r.jsx)(eA,{children:(0,r.jsx)("div",{className:"transition-all",style:n,children:(0,r.jsx)(eG,{className:"source-code-browser",...e})})})};async function eB(){let e=v.L.createRequestOperation("query",(0,a.h)(eV,{}));return v.L.executeQuery(e).then(e=>{var t;return(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.repositoryList)||[]})}async function eJ(e,t){var n;if(!t)return"";let r=null==t?void 0:t.type,l=null===(n=(0,x.U$)(e))||void 0===n?void 0:n[0];if(null==r?void 0:r.startsWith("image"))return"image";if(l||(null==r?void 0:r.startsWith("text")))return"text";let s=await new Promise((e,n)=>{let r=t.slice(0,1024),l=new FileReader;l.onloadend=function(t){var n;if((null==t?void 0:null===(n=t.target)||void 0===n?void 0:n.readyState)===FileReader.DONE){let n=t.target.result;"string"!=typeof n?e(!1):/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x9F]/.test(n)?e(!1):e(!0)}},l.onerror=function(){e(!1)},l.readAsText(r,"UTF-8")});return s?"text":"raw"}async function eW(e,t){if(!e)return[];if(!t)throw Error(U.l8.REPOSITORY_NOT_FOUND);if((0,o.Z)(t.refs))throw Error(U.l8.REPOSITORY_SYNC_FAILED);let{basename:n,rev:r,viewMode:l}=(0,U.Jt)(e);if(!r||!l)throw Error(U.l8.INVALID_URL);let s=(0,U.yH)(n,"tree"===l),a=s.map(e=>()=>(0,p.Z)((0,U.Vq)(t,r,e),{responseFormatter(e){let t=e.headers.get("Content-Type");if(t!==eH)throw Error(U.l8.INVALID_URL);return e.json()},errorHandler(){throw Error(U.l8.NOT_FOUND)}})),i=await Promise.all(a.map(e=>e())),c=[];for(let e of i){var d;(null==e?void 0:null===(d=e.entries)||void 0===d?void 0:d.length)&&(c=[...c,...e.entries])}return c}},48048:function(e,t,n){"use strict";n.d(t,{I:function(){return b},Jt:function(){return f},Pj:function(){return x},UR:function(){return v},Vq:function(){return y},fr:function(){return p},i3:function(){return h},kQ:function(){return N},l8:function(){return l},r2:function(){return g},s8:function(){return j},yH:function(){return m}});var r,l,s=n(74630),a=n(5035),i=n(64220),o=n(49122),c=n(18500);(r=l||(l={})).INVALID_URL="INVALID_URL",r.NOT_FOUND="NOT_FOUND",r.REPOSITORY_NOT_FOUND="REPOSITORY_NOT_FOUND",r.REPOSITORY_SYNC_FAILED="REPOSITORY_SYNC_FAILED";let d=Object.keys(c.vW).map(e=>u(e));function u(e){return e.toLowerCase().replaceAll("_","")}function f(e){let t,n,r;let l={};if(!e)return l;let s=e.indexOf("/-/"),a=e.split("/"),i=a[0],u=d.includes(i);if(!u||-1===s)return l;let f=c.vW.Git;switch(i){case"git":f=c.vW.Git;break;case"github":f=c.vW.Github;break;case"gitlab":f=c.vW.Gitlab;break;case"githubselfhosted":f=c.vW.GithubSelfHosted;break;case"gitlabselfhosted":f=c.vW.GitlabSelfHosted}let h=e.indexOf("/-/tree/"),m=e.indexOf("/-/blob/");if(h>-1){n="tree";let l=e.slice(h+8),s=l.split("/");r=s[0],t=(0,o.Z)(s.slice(1).join("/"),"/")}if(m>-1){n="blob";let l=e.slice(m+8),s=l.split("/");r=s[0],t=(0,o.Z)(s.slice(1).join("/"),"/")}let x=e.split("/-/")[0],p=x.split("/").slice(1).join("/");return{repositorySpecifier:e.split("/-/")[0],repositoryName:p,repositoryKind:f,rev:r,viewMode:n,basename:t}}function h(e){if(!e)return"";let t=e.split("/");return t[t.length-1]}function m(e,t){if((0,s.Z)(e))return[];let n=[""],r=e.split("/"),l=t?r.length:r.length-1;for(let e=0;e<l;e++)n.push(r.slice(0,e+1).join("/"));return n}function x(e){if((null==e?void 0:e.kind)&&(null==e?void 0:e.name))return"".concat(u(e.kind),"/").concat(e.name)}function p(e){return(0,a.Z)(e,e=>"".concat(u(e.kind),"/").concat(e.name))}function v(e){let t=(0,i.Z)(e,e=>e);return t.sort((e,t)=>e.name.localeCompare(t.name)),t}function g(e){if(!e)return{name:"",ref:""};let t=e.match(/refs\/(\w+)\/(.*)/);if(t){let n="tags"===t[1]?"tag":"branch";return{kind:n,name:encodeURIComponent(t[2]),ref:e}}return{name:"",ref:e}}function j(e){let t,n,r,l;for(let s of e)"refs/heads/main"===s?t=s:"refs/heads/master"===s?n=s:!r&&s.startsWith("refs/heads/")?r=s:!l&&s.startsWith("refs/tags/")&&(l=s);return t||n||r||l}function b(e,t,n,r){let l=x(e);return"".concat(l,"/-/").concat("file"===r?"blob":"tree","/").concat(null!=t?t:"","/").concat((null!=n?n:"").split("/").map(e=>encodeURIComponent(e)).join("/"))}function y(e,t,n){let r=null==e?void 0:e.id,l=null==e?void 0:e.kind;if(!r||!l||!t)return null;let s="".concat(u(l),"/").concat(r);return"/repositories/".concat(s,"/rev/").concat(t,"/").concat(null!=n?n:"")}function N(e){if(!e)return null;let t=/^#L(\d+)(?:-L(\d+))?/.exec(e);if(!t)return null;let[,n,r]=t,l=parseInt(n),s=parseInt(r);return{start:Number.isNaN(l)?void 0:l,end:Number.isNaN(s)?void 0:s}}},27064:function(e,t,n){"use strict";n.d(t,{u:function(){return l}});var r=n(18366);let l=(0,r.Z)()},30601:function(e,t,n){"use strict";n.d(t,{Hb:function(){return h},wt:function(){return d},xc:function(){return m},yo:function(){return f}});var r=n(36164),l=n(3546),s=n(74630),a=n(36327),i=n(80605),o=n(74248),c=n(81565);let d="3.5rem",u=l.createContext({}),f=e=>{let{children:t}=e,n=(0,i.UA)(),[a,o]=l.useState(!1);return l.useEffect(()=>{let e=window.self!==window.top;e||(0,s.Z)(n)||o(n)},[n]),(0,r.jsx)(u.Provider,{value:{isShowDemoBanner:a,setIsShowDemoBanner:o},children:t})};function h(){let{isShowDemoBanner:e,setIsShowDemoBanner:t}=l.useContext(u);return[e,t]}function m(){let[e,t]=h(),{data:n}=(0,a.Z)("https://api.github.com/repos/TabbyML/tabby",e=>fetch(e).then(e=>e.json()));return(0,r.jsxs)("div",{className:(0,o.cn)("flex items-center justify-between bg-primary px-4 text-primary-foreground transition-all md:px-5",{"opacity-100 pointer-events-auto":e,"opacity-0 pointer-events-none":!e}),style:e?{height:d}:{height:0},children:[(0,r.jsxs)("a",{href:"https://links.tabbyml.com/schedule-a-demo",target:"_blank",className:"flex items-center gap-x-2 text-xs font-semibold underline md:text-sm",children:[(0,r.jsx)("span",{children:"\uD83D\uDCC6"}),(0,r.jsx)("span",{children:"Book a 30-minute product demo."})]}),(0,r.jsxs)("div",{className:"flex items-center gap-x-4 md:gap-x-8",children:[(0,r.jsxs)("a",{href:"https://github.com/TabbyML/tabby",target:"_blank",className:"flex items-center transition-all hover:opacity-70",children:[(0,r.jsx)(c.IconGithub,{}),(0,r.jsxs)("div",{className:"ml-2 hidden md:block",children:[(0,r.jsx)("p",{className:"text-xs font-semibold",children:"TabbyML/tabby"}),(0,r.jsxs)("div",{className:(0,o.cn)("flex items-center text-xs transition-all",{"h-4 opacity-70":n,"h-0 opacity-0":!n}),children:[(0,r.jsx)(c.IconStar,{className:"mr-1 h-2.5 w-2.5"}),(0,r.jsx)("span",{children:null==n?void 0:n.stargazers_count}),(0,r.jsx)(c.IconGitFork,{className:"ml-2 mr-1 h-2.5 w-2.5"}),(0,r.jsx)("span",{children:null==n?void 0:n.forks_count})]})]})]}),(0,r.jsx)(c.IconClose,{className:"cursor-pointer transition-all hover:opacity-70",onClick:()=>t(!1)})]})]})}},38736:function(e,t,n){"use strict";n.d(t,{J:function(){return d},U:function(){return u}});var r=n(36164),l=n(3546),s=n(7062),a=n.n(s),i=n(9010),o=n(24449);let c=l.createContext({}),d=e=>{let{children:t}=e,[n,s]=l.useState(!1),[d]=(0,o.n)(n,200,{leading:!0}),{theme:u}=(0,i.X)();return l.useEffect(()=>{a().config({barColors:{0:"dark"===u?"#DC981A":"#B7942B"}})},[]),(0,r.jsxs)(c.Provider,{value:{progress:d,setProgress:s},children:[d&&(0,r.jsx)(a(),{}),t]})},u=()=>l.useContext(c)},36065:function(e,t,n){"use strict";n.d(t,{di:function(){return m},e8:function(){return d},fu:function(){return f},mY:function(){return o},rb:function(){return u},sZ:function(){return c},zz:function(){return h}});var r=n(36164),l=n(3546),s=n(53241),a=n(93170),i=n(74248);n(30220);let o=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)(s.mY,{ref:t,className:(0,i.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",n),...l})});o.displayName=s.mY.displayName;let c=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,r.jsx)(a.Z,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,r.jsx)(s.mY.Input,{ref:t,className:(0,i.cn)("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",n),...l})]})});c.displayName=s.mY.Input.displayName;let d=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)(s.mY.List,{ref:t,className:(0,i.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",n),...l})});d.displayName=s.mY.List.displayName;let u=l.forwardRef((e,t)=>(0,r.jsx)(s.mY.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));u.displayName=s.mY.Empty.displayName;let f=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)(s.mY.Group,{ref:t,className:(0,i.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",n),...l})});f.displayName=s.mY.Group.displayName;let h=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)(s.mY.Separator,{ref:t,className:(0,i.cn)("-mx-1 h-px bg-border",n),...l})});h.displayName=s.mY.Separator.displayName;let m=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)(s.mY.Item,{ref:t,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-disabled:pointer-events-none aria-disabled:opacity-50 aria-selected:bg-accent aria-selected:text-accent-foreground",n),...l})});m.displayName=s.mY.Item.displayName},30220:function(e,t,n){"use strict";n.d(t,{$N:function(){return x},Be:function(){return p},Vq:function(){return o},cN:function(){return m},cZ:function(){return f},fK:function(){return h},hg:function(){return c}});var r=n(36164),l=n(3546),s=n(4318),a=n(1663),i=n(74248);let o=s.fC,c=s.xz,d=s.h_;s.x8;let u=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)(s.aV,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...l})});u.displayName=s.aV.displayName;let f=l.forwardRef((e,t)=>{let{className:n,children:l,...o}=e;return(0,r.jsxs)(d,{children:[(0,r.jsx)(u,{}),(0,r.jsxs)(s.VY,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...o,children:[l,(0,r.jsxs)(s.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(a.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=s.VY.displayName;let h=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...n})};h.displayName="DialogHeader";let m=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n})};m.displayName="DialogFooter";let x=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)(s.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",n),...l})});x.displayName=s.Dx.displayName;let p=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)(s.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",n),...l})});p.displayName=s.dk.displayName},54594:function(e,t,n){"use strict";n.d(t,{Bw:function(){return f},DI:function(){return c},Ph:function(){return o},Ql:function(){return m},U$:function(){return x},i4:function(){return u},ki:function(){return d}});var r=n(36164),l=n(3546),s=n(31889),a=n(74248),i=n(81565);let o=s.fC,c=s.ZA,d=s.B4,u=l.forwardRef((e,t)=>{let{className:n,children:l,...o}=e;return(0,r.jsxs)(s.xz,{ref:t,className:(0,a.cn)("flex h-9 w-full items-center justify-between rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),...o,children:[l,(0,r.jsx)(s.JO,{asChild:!0,children:(0,r.jsx)(i.IconChevronUpDown,{className:"opacity-50"})})]})});u.displayName=s.xz.displayName;let f=l.forwardRef((e,t)=>{let{className:n,children:l,position:i="popper",...o}=e;return(0,r.jsx)(s.h_,{children:(0,r.jsx)(s.VY,{ref:t,className:(0,a.cn)("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md animate-in fade-in-80","popper"===i&&"translate-y-1",n),position:i,...o,children:(0,r.jsx)(s.l_,{className:(0,a.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l})})})});f.displayName=s.VY.displayName;let h=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)(s.__,{ref:t,className:(0,a.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...l})});h.displayName=s.__.displayName;let m=l.forwardRef((e,t)=>{let{className:n,children:l,isPlaceHolder:o,...c}=e;return(0,r.jsxs)(s.ck,{ref:t,className:(0,a.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...c,children:[!o&&(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(s.wU,{children:(0,r.jsx)(i.IconCheck,{className:"h-4 w-4"})})}),(0,r.jsx)(s.eT,{children:l})]})});m.displayName=s.ck.displayName;let x=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)(s.Z0,{ref:t,className:(0,a.cn)("-mx-1 my-1 h-px bg-muted",n),...l})});x.displayName=s.Z0.displayName},99047:function(e,t,n){"use strict";n.d(t,{RM:function(){return o},SC:function(){return d},iA:function(){return a},pj:function(){return f},ss:function(){return u},xD:function(){return i}});var r=n(36164),l=n(3546),s=n(74248);let a=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)("table",{ref:t,className:(0,s.cn)("w-full caption-bottom text-sm",n),...l})});a.displayName="Table";let i=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)("thead",{ref:t,className:(0,s.cn)("[&_tr]:border-b",n),...l})});i.displayName="TableHeader";let o=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,s.cn)("[&_tr:last-child]:border-0",n),...l})});o.displayName="TableBody";let c=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,s.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",n),...l})});c.displayName="TableFooter";let d=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)("tr",{ref:t,className:(0,s.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",n),...l})});d.displayName="TableRow";let u=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)("th",{ref:t,className:(0,s.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",n),...l})});u.displayName="TableHead";let f=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)("td",{ref:t,className:(0,s.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",n),...l})});f.displayName="TableCell";let h=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)("caption",{ref:t,className:(0,s.cn)("mt-4 text-sm text-muted-foreground",n),...l})});h.displayName="TableCaption"},50538:function(e,t,n){"use strict";n.d(t,{SP:function(){return c},dr:function(){return o},mQ:function(){return i},nU:function(){return d}});var r=n(36164),l=n(3546),s=n(6044),a=n(74248);let i=s.fC,o=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)(s.aV,{ref:t,className:(0,a.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...l})});o.displayName=s.aV.displayName;let c=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)(s.xz,{ref:t,className:(0,a.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...l})});c.displayName=s.xz.displayName;let d=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,r.jsx)(s.VY,{ref:t,className:(0,a.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...l})});d.displayName=s.VY.displayName},93877:function(e,t,n){"use strict";n.d(t,{BT:function(){return o},Ds:function(){return c},Ot:function(){return u}});var r=n(3546);let l=(e,t)=>{let[n,l]=(0,r.useState)(t),[s,a]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{let t=localStorage.getItem(e);t&&l(JSON.parse(t)),a(!1)},[]),[n,t=>{l(t),localStorage.setItem(e,JSON.stringify(t))},s]};class s{get value(){if("undefined"!=typeof localStorage){let e=localStorage.getItem(this.storageKey);if(e)return"true"===e}return this.defaultValue}constructor(e,t,n,r){this.storageKey=e,this.title=t,this.description=n,this.defaultValue=r}}class a{defineGlobalVar(){return new s(this.storageKey,this.title,this.description,this.defaultValue)}defineHook(){return()=>{let[e,t,n]=l(this.storageKey,this.defaultValue);return[{value:e,title:this.title,description:this.description,loading:n},()=>{t(!e)}]}}constructor(e,t,n,r){this.storageKey="EXP_".concat(e),this.title=t,this.description=n,this.defaultValue=null!=r&&r}}let i=new a("enable_code_browser_quick_action_bar","Quick Action Bar","Enable Quick Action Bar to display a convenient toolbar when you select code, offering options to explain the code, add unit tests, and more.",!0),o=i.defineGlobalVar(),c=i.defineHook(),d=new a("enable_search","Search","Enable the search on the home page to search for anything you want to know using the local chat model.",!0);d.defineGlobalVar();let u=d.defineHook()},9010:function(e,t,n){"use strict";n.d(t,{X:function(){return l}});var r=n(28242);function l(){let{theme:e,systemTheme:t,setTheme:n}=(0,r.F)();return{theme:e&&"system"!==e?e:t||"light",setTheme:n,systemTheme:t}}},38785:function(e,t,n){"use strict";n.d(t,{U:function(){return s}});var r=n(3546);let l=!0;function s(){let[e,t]=r.useState(()=>!l);return r.useEffect(function(){l=!1,t(!0)},[]),e}},44645:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(3546),l=n(11978);function s(){let e=(0,l.usePathname)(),t=(0,l.useRouter)(),n=(0,l.useSearchParams)(),s=(0,r.useCallback)(e=>{let t=new URLSearchParams(n);e&&Object.entries(e).forEach(e=>{let[n,r]=e;return t.set(n,r)});let r=t.toString();return r.length>0?"?".concat(r):""},[n]),a=(0,r.useCallback)(r=>{let l=function(e,t,n){var r,l;let s=null===(r=n.searchParams)||void 0===r?void 0:r.set,a=null===(l=n.searchParams)||void 0===l?void 0:l.del,i=new URLSearchParams(t);s&&Object.entries(s).forEach(e=>{let[t,n]=e;return i.set(t,n)}),a&&(Array.isArray(a)?a.forEach(e=>i.delete(e)):i.delete(a));let o=i.toString(),c=e;return o.length>0&&(c+="?".concat(o)),n.hash&&(c+="#".concat(n.hash.replace(/^#/,""))),c}((null==r?void 0:r.pathname)||e,n,r);r.replace?t.replace(l):t.push(l)},[e,n]);return{pathname:e,router:t,searchParams:n,getQueryString:s,updateUrlComponents:a}}},25647:function(e,t,n){"use strict";n.d(t,{o:function(){return s}});var r=n(3546),l=n(38785);let s=(e,t)=>{let n=(0,l.U)(),s=e(e=>null==e?void 0:e._hasHydrated),a=e(t),[i,o]=r.useState(n&&s?a:void 0);return r.useEffect(()=>{o(a)},[a]),i}},17451:function(e,t,n){"use strict";n.d(t,{a:function(){return o}});var r=n(27257),l=n(85654),s=n(74248);let a=["_hasHydrated","setHasHydrated","activeChatId"],i={_hasHydrated:!1,chats:void 0,activeChatId:(0,s.x0)()},o=(0,r.Ue)()((0,l.tJ)(e=>({...i,setHasHydrated:t=>{e({_hasHydrated:t})}}),{name:"tabby-chat-storage",partialize:e=>Object.fromEntries(Object.entries(e).filter(e=>{let[t]=e;return!a.includes(t)})),onRehydrateStorage:()=>e=>{e&&e.setHasHydrated(!0)}}))},18452:function(e,t,n){"use strict";n.d(t,{m:function(){return a},H:function(){return i}});var r=n(3546),l=n(89704),s=n(95686);function a(e,t){let[n,s]=(0,r.useState)(null),a=!1;return(0,r.useEffect)(()=>{if(e.current&&!a){var n;a=!0,s((n=e.current,(0,l.K)(n,{expose:{navigate:t.navigate}})))}},[e.current]),n}function i(e){let[t,n]=(0,r.useState)(null),l=!1;return(0,r.useEffect)(()=>{let t=window.self!==window.top;t&&!l&&(l=!0,n((0,s.c)({expose:{init:e.init,sendMessage:e.sendMessage}})))},[]),t}}},function(e){e.O(0,[7998,5498,6312,4007,5384,1283,3449,2578,9421,9317,1454,4421,7828,830,3882,7680,426,739,1889,6806,4382,2660,6044,4031,9736,1565,7417,3375,5289,1744],function(){return e(e.s=4755)}),_N_E=e.O()}]);